{% extends 'parent/base.html' %}
{% load thumbnail %}
{% load custom_filters %}
{% load static %}

{% block title %}profile{% endblock %}
{% block extra_css %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/pages/profile.css' %}">
{% endblock %}
{% block extra_js %}
    <script src="{% static 'js/profile.js' %}"></script>
{% endblock %}


{% block content %}
    <!-- Ù…Ø­ØªÙˆØ§ÛŒ Ø§ØµÙ„ÛŒ -->
<main class="main">
    <div class="container">
                    <!-- Ø³Ø§ÛŒØ¯Ø¨Ø§Ø± Ù¾Ø±ÙˆÙØ§ÛŒÙ„ -->
            <aside class="sidebar">
                <div class="profile-card">
                    <div class="profile-avatar">
                        {% if request.user.account.photo %}
                            <img src="{{ request.user.account.photo.url }}" alt="ØªØµÙˆÛŒØ± Ù¾Ø±ÙˆÙØ§ÛŒÙ„" class="profile-photo">
                        {% else %}
                            <img src="{% static 'images/man.png' %}" style="width: 75px">
                        {% endif %}
                    </div>
                    <div class="profile-info">
                        <h2>{{ request.user.account.display_name }}</h2>
                        <section>{{ request.user.phone|fa_number }}</section>
                        <button onclick="window.location.href='{% url 'account:edit_account' %}'" class="edit-profile-btn">ÙˆÛŒØ±Ø§ÛŒØ´ Ù¾Ø±ÙˆÙØ§ÛŒÙ„</button>
                    </div>
                </div>

                <nav class="profile-nav">
                    <ul>
                        <li class="{% if active_tab == 'orders' %}active{% endif %}">
                            <a href="{% url 'orders:user_orders' %}">Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ù†</a>
                        </li>
                        <li><a href="#">Ø¯ÛŒØ¯Ú¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ù†</a></li>
                        <li><a href="#">Ù„ÛŒØ³Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ù†</a></li>
                        <li><a href="#">Ø¢Ø¯Ø±Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ù†</a></li>
                        <li><a href="#">Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ù‡Ø¯ÛŒÙ‡</a></li>
                        <li><a href="#">â€ŒÚ©Ù„Ø§Ø¨</a></li>
                        <li><a href="#">Ù¾ÛŒØºØ§Ù…â€ŒÙ‡Ø§</a></li>
                        <li><a href="#">ØªÙ†Ø¸ÛŒÙ…Ø§Øª</a></li>
                    </ul>
                </nav>
            </aside>

            <!-- Ø¨Ø®Ø´ Ù…Ø­ØªÙˆØ§ÛŒ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ -->
            <section class="profile-content">
                <div class="content-header">
                    <h2>Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ù†</h2>
                    <div class="search-box">
                        <label>
                            <input type="text" placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§...">
                        </label>
                        <button class="search-btn">ğŸ”</button>
                    </div>
                </div>

                <div class="orders-list">
                    {% if orders %}
                        {% for order in orders %}
                            <div class="order-card">
                                <div class="order-header">
                                    <div class="order-info">
                                        <span class="order-id">Ø´Ù…Ø§Ø±Ù‡ Ø³ÙØ§Ø±Ø´: {{ order.id }}</span>
                                        <span class="order-date">ØªØ§Ø±ÛŒØ®: {{ order.created|date:"Y/m/d" }}</span>
                                    </div>
                                    <div class="order-status {{ order.status }}">
                                        {{ order.get_status_display }}
                                    </div>
                                </div>

                                <div class="order-items">
                                    {% for item in order.items.all %}
                                        <div class="order-item">
                                            <a href="{{ item.product.get_absolute_url}}">
                                                <img src="{{ item.product.images.first.file.url }}">
                                            </a>
                                            <div class="item-info">
                                                <h4>{{ item.product.name }}</h4>
                                                <p>ØªØ¹Ø¯Ø§Ø¯: {{ item.quantity }} Ø¹Ø¯Ø¯</p>
                                                <p class="price">{{ item.get_cost|money_format }} ØªÙˆÙ…Ø§Ù†</p>
                                            </div>
                                        </div>
                                    {% endfor %}
                                </div>

                                <div class="order-footer">
                                    <div class="order-total">
                                        <strong>Ù…Ø¨Ù„Øº Ú©Ù„: {{ order.get_total_cost|money_format }} ØªÙˆÙ…Ø§Ù†</strong>
                                    </div>
                                    <div class="order-actions">
                                        <a href="{% url 'orders:order_detail' order.id %}" class="btn btn-primary">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¬Ø²Ø¦ÛŒØ§Øª</a>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    {% else %}
                        <p>Ù‡Ù†ÙˆØ² Ø³ÙØ§Ø±Ø´ÛŒ Ø«Ø¨Øª Ù†Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯.</p>
                    {% endif %}
                </div>

            </section>
        </div>
    </main>


{% endblock %}
