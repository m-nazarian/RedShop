{% load custom_filters %}


<div class="space-y-6">

    <div class="flex flex-col sm:flex-row justify-between items-center gap-4 mb-6">
        <h2 class="text-xl font-bold text-gray-800 border-r-4 border-blue-500 pr-3">
            Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ù†
        </h2>

        <div class="relative w-full sm:w-auto">
            <input type="text"
                   id="order-search-input"
                   placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§..."
                   class="w-full sm:w-64 pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm">
            <span class="absolute left-3 top-2.5 text-gray-400">ğŸ”</span>
        </div>
    </div>

    {% if orders %}
        {% for order in orders %}
            <div class="bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-shadow duration-200 p-5" style="margin: 5px 0 5px 0">
               <div class="flex flex-col md:flex-row justify-between items-start md:items-center border-b border-gray-100 pb-4 mb-4 gap-4">
                    <div class="text-sm text-gray-600 flex flex-col sm:flex-row gap-2 sm:gap-6">
                        <span class="font-medium">
                            Ø´Ù…Ø§Ø±Ù‡ Ø³ÙØ§Ø±Ø´: <span class="text-gray-900">{{ order.order_number }}</span>
                        </span>
                        <span class="hidden sm:inline text-gray-300">|</span>
                        <span>
                            ØªØ§Ø±ÛŒØ®: <span class="text-gray-900">{{ order.created|date:"Y/m/d"|fa_number }}</span>
                        </span>
                    </div>
                    <div class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700">
                        {{ order.get_status_display }}
                    </div>
               </div>

               <div class="space-y-4">
                    {% for item in order.items.all %}
                        <div class="flex items-center gap-4">
                            <a href="{{ item.product.get_absolute_url }}" class="shrink-0">
                                {% if item.product.images.first %}
                                    <img src="{{ item.product.images.first.file.url }}" alt="{{ item.product.name }}" class="w-16 h-16 object-cover rounded-lg border border-gray-100">
                                {% else %}
                                    <div class="w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center text-gray-400">ğŸ“·</div>
                                {% endif %}
                            </a>
                            <div class="flex-1 min-w-0">
                                <h4 class="text-sm font-semibold text-gray-800 truncate">{{ item.product.name|fa_number }}</h4>
                                <div class="text-xs text-gray-500 mt-1">
                                    <span>{{ item.quantity|fa_number }} Ø¹Ø¯Ø¯</span>
                                    <span class="mx-1">â€¢</span>
                                    <span>{{ item.get_cost|money_format }} ØªÙˆÙ…Ø§Ù†</span>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
               </div>

               <div class="mt-5 pt-4 border-t border-gray-100 flex flex-col sm:flex-row justify-between items-center gap-4">
                    <div class="text-gray-800">
                        Ù…Ø¨Ù„Øº Ú©Ù„: <span class="font-bold text-lg">{{ order.get_total_cost|money_format }} ØªÙˆÙ…Ø§Ù†</span>
                    </div>
                    <button onclick="loadProfileContent('{% url 'orders:order_detail_partial' order.id %}')"
                            class="w-full sm:w-auto text-center px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-colors duration-200 cursor-pointer">
                        Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¬Ø²Ø¦ÛŒØ§Øª
                    </button>
               </div>

            </div>
        {% endfor %}
    {% else %}
        <div class="text-center py-12 bg-gray-50 rounded-xl border border-dashed border-gray-300">
            <p class="text-gray-500">Ù‡Ù†ÙˆØ² Ø³ÙØ§Ø±Ø´ÛŒ Ø«Ø¨Øª Ù†Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯.</p>
        </div>
    {% endif %}

</div>