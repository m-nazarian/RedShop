{% load static %}
{% load custom_filters %}
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="utf-8">
    <title>ÙØ§Ú©ØªÙˆØ± ÙØ±ÙˆØ´ - {{ order.order_number }}</title>
    <style>
        /* ØªØ¹Ø±ÛŒÙ ÙÙˆÙ†Øª Ø¨Ø±Ø§ÛŒ PDF */
        @font-face {
            font-family: 'Vazir';
            src: url('{% static "fonts/Shabnam-FD.woff2" %}');
        }

        body {
            font-family: 'Vazir', Tahoma, sans-serif;
            font-size: 14px;
            color: #333;
            direction: rtl;
        }

        .invoice-box {
            max-width: 800px;
            margin: auto;
            padding: 30px;
            border: 1px solid #eee;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);
            line-height: 24px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #3b82f6;
            padding-bottom: 20px;
            margin-bottom: 20px;
        }

        .title {
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }

        .info-table {
            width: 100%;
            margin-bottom: 20px;
        }

        .info-table td {
            padding: 5px;
            vertical-align: top;
        }

        .items-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .items-table th {
            background: #f3f4f6;
            padding: 10px;
            text-align: right;
            border-bottom: 2px solid #ddd;
        }

        .items-table td {
            padding: 10px;
            border-bottom: 1px solid #eee;
        }

        .total-row td {
            border-top: 2px solid #333;
            font-weight: bold;
            padding-top: 15px;
        }

        /* Ø±Ù†Ú¯â€ŒØ¨Ù†Ø¯ÛŒ */
        .text-blue { color: #2563eb; }
        .text-gray { color: #6b7280; }
    </style>
</head>
<body>
    <div class="invoice-box">

        <div class="header">
            <table style="width: 100%;">
                <tr>
                    <td class="title">
                        ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ù…Ù† ğŸ›ï¸
                    </td>
                    <td style="text-align: left;">
                        Ø´Ù…Ø§Ø±Ù‡ ÙØ§Ú©ØªÙˆØ±: <strong>{{ order.order_number }}</strong><br>
                        ØªØ§Ø±ÛŒØ®: {{ order.created|date:"Y/m/d"|fa_number }}
                    </td>
                </tr>
            </table>
        </div>

        <table class="info-table">
            <tr>
                <td style="width: 50%;">
                    <strong>ÙØ±ÙˆØ´Ù†Ø¯Ù‡:</strong><br>
                    ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø§ÛŒÙ†ØªØ±Ù†ØªÛŒ Ø±Ø¯Ø´Ø§Ù¾<br>
                    ØªÙ‡Ø±Ø§Ù†ØŒ Ø®ÛŒØ§Ø¨Ø§Ù† ÙˆÙ„ÛŒØ¹ØµØ±...<br>
                    ØªÙ„ÙÙ†: Û°Û²Û±-Û±Û²Û³Û´ÛµÛ¶Û·Û¸
                </td>
                <td style="width: 50%;">
                    <strong>Ø®Ø±ÛŒØ¯Ø§Ø±:</strong><br>
                    {{ order.first_name }} {{ order.last_name }}<br>
                    {{ order.province }}ØŒ {{ order.city }}<br>
                    {{ order.address_line|fa_number }}<br>
                    ØªÙ„ÙÙ†: {{ order.phone|fa_number }}
                </td>
            </tr>
        </table>

        <table class="items-table">
            <thead>
                <tr>
                    <th>Ù…Ø­ØµÙˆÙ„</th>
                    <th style="width: 15%;">ØªØ¹Ø¯Ø§Ø¯</th>
                    <th style="width: 20%;">Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯</th>
                    <th style="width: 20%;">Ù‚ÛŒÙ…Øª Ú©Ù„</th>
                </tr>
            </thead>
            <tbody>
                {% for item in order.items.all %}
                <tr>
                    <td>{{ item.product.name|fa_number }}</td>
                    <td>{{ item.quantity|fa_number }}</td>
                    <td>{{ item.price|money_format }}</td>
                    <td>{{ item.price|multiply:item.quantity|money_format }}</td>
                </tr>
                {% endfor %}
            </tbody>

            <tr class="total-row">
                <td colspan="2"></td>
                <td>Ø¬Ù…Ø¹ Ú©Ù„ Ú©Ø§Ù„Ø§Ù‡Ø§:</td>
                <td>{{ order.get_total_cost|money_format }} ØªÙˆÙ…Ø§Ù†</td>
            </tr>
            <tr>
                <td colspan="2"></td>
                <td>Ù‡Ø²ÛŒÙ†Ù‡ Ø§Ø±Ø³Ø§Ù„:</td>
                <td>{{ order.post_price|money_format }} ØªÙˆÙ…Ø§Ù†</td>
            </tr>
            <tr style="font-size: 16px; color: #2563eb;">
                <td colspan="2"></td>
                <td><strong>Ù…Ø¨Ù„Øº Ù†Ù‡Ø§ÛŒÛŒ:</strong></td>
                <td><strong>{{ order.total|money_format }} ØªÙˆÙ…Ø§Ù†</strong></td>
            </tr>
        </table>

        <div style="margin-top: 40px; text-align: center; font-size: 12px; color: #888;">
            <p>Ø§ÛŒÙ† ÙØ§Ú©ØªÙˆØ± Ø¨Ù‡ ØµÙˆØ±Øª Ø³ÛŒØ³ØªÙ…ÛŒ ØµØ§Ø¯Ø± Ø´Ø¯Ù‡ Ùˆ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù…Ù‡Ø± Ùˆ Ø§Ù…Ø¶Ø§ Ù†Ø¯Ø§Ø±Ø¯.</p>
        </div>
    </div>
</body>
</html>